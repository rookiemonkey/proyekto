<% handle = "#{@project.id}-#{@project.name.parameterize}" %>
<% breadcrumb_one = { label: 'Projects', url: organization_projects_path } %>
<% breadcrumb_two = { label: @project.name, url: organization_project_path(@project) }  %>
<%= render 'components/breadcrumb', breadcrumbs: [breadcrumb_one, breadcrumb_two] %>
<%= render 'components/modal_project_delete', project: @project, handle: handle %>
<%= render 'components/modal_project_update', project: @project, handle: handle %>
<%= render 'components/modal_artifact_new', project: @project, handle: handle %>

<section class="section section-main">

  <div class="level">
    <div class="level-left">
    </div>
    <div class="level-right">
      <div class="level-item">
        <div class="buttons is-right">
          <button class="button is-primary jb-modal" data-target="new-artifact-<%= handle %>">
            <span class="icon"><i class="mdi mdi-plus-circle"></i></span>
            <span>Artifact</span>
          </button>
          <button class="button is-warning jb-modal" data-target="update-project-<%= handle %>">
            <span class="icon"><i class="mdi mdi-pencil"></i></span>
            <span>Update</span>
          </button>
          <button class="button is-danger jb-modal" data-target="delete-project-<%= handle %>">
            <span class="icon"><i class="mdi mdi-window-close"></i></span>
            <span>Delete</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="card has-table has-mobile-sort-spaced">

    <header class="card-header">
      <p class="card-header-title">
        <span class="icon"><i class="mdi mdi-hexagon-slice-6"></i></span>
        Artifacts
      </p>
    </header>

    <div class="card-content">
      <div class="b-table has-pagination">
        <div class="table-wrapper has-mobile-cards">
          <table class="table is-fullwidth is-striped is-hoverable is-sortable is-fullwidth">
            <thead>

            <tr>
              <th></th>
              <th>Name</th>
              <th>Description</th>
              <th>Image</th>
              <th></th>
            </tr>
            </thead>

            <tbody>
              <% @artifacts.each do |artifact| %>

                <tr>
                  <td class="is-image-cell">
                    <div class="image">
                      <%= avatar_for(artifact.name) %>
                    </div>
                  </td>
                  <td data-label="Name">
                    <%= artifact.name %>
                  </td>
                  <td data-label="Description">
                    <%= artifact.description %>
                  </td>
                  <td data-label="Image">
                    <% if artifact.image_url %>
                      <img src="<%= artifact.image_url %>" alt="<% artifact.name %>"/>
                    <% else %>
                      <%= image_tag asset_path('placeholder.png'), alt: "No artifact image available" %>
                    <% end %>
                  </td>
                  <td class="is-actions-cell"></td>
                </tr>
                
              <% end %>
            </tbody>

          </table>
        </div>
      </div>
    </div>
  </div>
</section>